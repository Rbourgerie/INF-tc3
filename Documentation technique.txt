%% Dossier de documentation technique %%

% Base de données:%
La base de données est créée sur SQLite de la manière qui suit:

CREATE TABLE "countries" (
	"common_name"	TEXT,
	"complete_name"	TEXT,
	"leader_titre"	TEXT,
	"leader_name"	TEXT,
	"capital"	TEXT,
	"population"	INTEGER,
	"currency"	TEXT,
	"latitude"	REAL,
	"longitude"	REAL,
	"PIB"	TEXT,
	"PIB_an"	INTEGER
);

La table contient 11 champs:
- Le nom commun du pays, au format texte ('France')
- Le nom conventionnel, au format texte ('French Republic')
- Le titre du dirigeant du pays, au format texte ('President')
- Le nom du dirigeant, au format texte ('Emmanuel Macron')
- La capitale, au format texte ('Paris')
- La population, au format integer (67022000)
- La monnaie, au format texte ('Euro')
- La latitude, au format real (48.85)
- La longitude, au format real (2.35)
- Le PIB, au format texte ('$2.845 trillion')
- L'année d'estimation du PIB, au format integer (2019)

Le code python 'Creation_base_donnees.py' a été utilisé pour créer cette base.
ATTENTION: Pour faire tourner ce programme, il est nécessaire d'avoir préalablement téléchargé le fichier 'Europe.zip'.

Il y a deux cases vides dans cette table: celles correspondant au PIB et à l'année de calcul du PIB du Vatican, car le Vatican n'a pas de PIB.
Ce cas particulier mis à part, la table est complète et chaque programme du code python fonctionne pour chaque pays.


% Serveur:%
Le serveur est émulé par le script python serveur1.py sur le port 8080.
La partie côté client est gèrée par le fichier index.html.
Les fichiers statiques sont dans le répertoire client.
Lors du chargement de la page par l'utilisateur, le client charge le fichier leaflet.js qui gèrera l'affichage des POI.
Le client envoie ensuite une requête GET /location. Le serveur renverra un fichier json contenant pour chaque pays : le nom du pays (clé "nom"), la latitude et la longtiude de sa capitale (clé lat et lon).
Puis le client ajoute ces POI sur la carte.
Lors du clique sur un POI le client envoie la requête GET /description/nomdupays. Le serveur renovoie alors un fichier html permettant d'afficher les informations correspondant au pays et de jouer l'hymne national.
Il peut arriver que le client envoie des requêtes GET pour charger des éléments pour l'affichage (ex : les drapeaux, les fichiers des hymnes). Pour cela, 3 repertoires ont été créés dans le repertoire client : images (contenant les images utilisés dans les fichiers css), flags (contenant les drapeaux des différents pays au format png) et enfin anthem (contenant les hymnes au format mp3)
